{% extends "accounts/layout.html" %}
{% load static %}
{% load custom_filters %}
{% block cssfiles %}
{% endblock cssfiles %}

{% block content %}
    <h4> Listings created by <b>{{ user.username }}</b></h4>
    <div class="row">
        {% for auction in auctions %}
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card h-100">
                
                <a href="{% url 'listing' num_id=auction.id %}">
                    <img class="card-img-top" src="{{ auction.image.url }}" alt="" width="330" height="300">
                </a>
                <div class="card-body">
                    <h4 class="card-title">
                        <a href="{% url 'listing' num_id=auction.id %}">{{ auction.title }}</a>
                        {% if auction.status == 'active' %}
                        <span class="badge badge-success">Active</span>
                        {% else %}
                        <span class="badge badge-danger">Closed</span>
                        {% endif %}
                    </h4>
                    
                    <h5>Start price: ${{ auction.startBid }}</h5>
                    <h5>
                        Current Bid: 
                        {% if max_bids_dict|lookup:auction %}
                            ${{ max_bids_dict|lookup:auction}}
                        {% else %}
                            <span class="font-italic">No bid yet</span>
                        {% endif %}
                    </h5>
                    <p class="card-text text-truncate" style="overflow:hidden;text-overflow:ellipsis;">
                        {{ auction.description }}
                    </p>
                </div>
                <div class="card-footer">
                    <small class="text-muted">Created on {{ auction.createdOn }}</small>
                </div>
            </div>
        </div>
        {% endfor %}

    </div>
	
{% endblock content %}
{% block jsfiles %}{% endblock jsfiles %}